# Dark Tower - Local Development Environment Variables
# Copy this file to .env and fill in the values
# WARNING: .env is git-ignored and contains secrets - NEVER commit it

# ========================================
# Database
# ========================================
DATABASE_URL=postgresql://darktower:dev_password_change_in_production@localhost:5432/dark_tower

# ========================================
# Redis
# ========================================
REDIS_URL=redis://:dev_password_change_in_production@localhost:6379

# ========================================
# Auth Controller
# ========================================

# Master encryption key for AES-256-GCM (REQUIRED for Auth Controller)
# Generate with: ./scripts/generate-master-key.sh
# WARNING: This is security-critical - never commit, log, or expose in APIs
AC_MASTER_KEY=REPLACE_WITH_GENERATED_KEY

# Auth Controller URL (for services to connect)
AC_URL=http://localhost:8082

# TLS certificates for local development
# Generate with: ./scripts/generate-dev-certs.sh
TLS_CERT_PATH=infra/docker/certs/auth-localhost.crt
TLS_KEY_PATH=infra/docker/certs/auth-localhost.key

# ========================================
# Service Credentials (OAuth 2.0 Client Credentials)
# ========================================
# These are generated by registering each service with Auth Controller
# Register with: ./scripts/register-service.sh <service-type> <region>

# Global Controller
GC_AC_CLIENT_ID=
GC_AC_CLIENT_SECRET=

# Meeting Controller
MC_AC_CLIENT_ID=
MC_AC_CLIENT_SECRET=

# Media Handler
MH_AC_CLIENT_ID=
MH_AC_CLIENT_SECRET=

# ========================================
# Logging
# ========================================
RUST_LOG=info

# Service-specific logging (uncomment to enable debug logging)
# RUST_LOG=info,ac_service=debug
# RUST_LOG=info,global_controller=debug
# RUST_LOG=info,meeting_controller=debug
# RUST_LOG=info,media_handler=debug

# ========================================
# Observability
# ========================================

# OpenTelemetry (Jaeger)
OTLP_ENDPOINT=http://localhost:4317

# ========================================
# Service Bind Addresses
# ========================================

# Auth Controller
AC_BIND_ADDRESS=0.0.0.0:8082

# Global Controller
GC_BIND_ADDRESS=0.0.0.0:8081

# Meeting Controller (QUIC/WebTransport)
MC_BIND_ADDRESS=0.0.0.0:4433

# Media Handler (QUIC)
MH_BIND_ADDRESS=0.0.0.0:4434
MH_MAX_STREAMS=10000

# ========================================
# Development Settings
# ========================================

# Set to "true" to enable additional development features
DEV_MODE=true
